(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{466:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var a=t(5155),o=t(4553),n=t(668),c=t(6736),s=t(3464),i=t(2115),l=t(2809),d=t(680),u=t(1846),p=t(8136),h=t(8964),m=t(902),f=t(1867);function y(){let[e,r]=i.useState({name:"",category:"",price:0,brand:"",description:"",stockQuantity:""}),[t,y]=i.useState(null),[g,b]=i.useState([]),[j,x]=i.useState([]),[v,w]=i.useState(!1),[E,A]=i.useState(null),[k,C]=i.useState(null),N=(0,o.b)();i.useEffect(()=>{(async()=>{let e=await (0,c.bW)(),r=await (0,c.Fs)();e&&r?(b(e.categories),x(r.brands)):console.log("Error fetching categories")})()},[]);let S=t=>{r({...e,[t.target.name]:t.target.value})},T=async r=>{if(r.preventDefault(),w(!0),C(null),A(null),!e.name){C("Product name cannot be blank"),w(!1);return}if(!e.price){C("Product price cannot be blank"),w(!1);return}if(!e.category){C("Product category cannot be blank"),w(!1);return}if(!e.brand){C("Product brand cannot be blank"),w(!1);return}if(!e.description){C("Product  description cannot be blank"),w(!1);return}if(!e.stockQuantity){C("Stock Quantity cannot be blank"),w(!1);return}if(!t){C("Please select a photo"),w(!1);return}let a=new FormData;a.append("name",e.name),a.append("category",e.category),a.append("brand",e.brand),a.append("description",e.description),a.append("stockQuantity",e.stockQuantity),a.append("price",e.price),a.append("photo",t);try{let e=await s.A.post("".concat(n.M,"/admin/add_product"),a,{headers:{Authorization:"Bearer ".concat(N),"Content-Type":"multipart/form-data"}});A(e.data.msg),setTimeout(()=>{window.location.href="/admin/products"},2e3)}catch(e){var o,c;console.error("Error uploading  info:",e),C((null===(c=e.response)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:o.message)||"An error occurred while uploading your information")}finally{w(!1)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.A,{style:{fontFamily:"sans-serif",marginTop:"2rem"},children:[(0,a.jsx)("h4",{style:{textAlign:"center",marginBottom:"1rem",color:"#3a7bd5",fontWeight:"bold"},children:"Add New Product"}),E&&(0,a.jsx)(d.A,{variant:"success",children:E}),k&&(0,a.jsx)(d.A,{variant:"danger",children:k}),(0,a.jsx)(u.A,{className:"justify-content-md-center",children:(0,a.jsx)(p.A,{xs:12,md:6,children:(0,a.jsxs)(h.A,{onSubmit:T,encType:"multipart/form-data",children:[(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicProductName",children:[(0,a.jsx)(h.A.Label,{children:"Product Name"}),(0,a.jsx)(h.A.Control,{type:"text",name:"name",value:e.name,onChange:S,placeholder:"your product  name",required:!0})]}),(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicBrand",children:[(0,a.jsx)(h.A.Label,{children:"Product Brand"}),(0,a.jsxs)(h.A.Select,{name:"brand",value:e.brand,onChange:S,required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Brand"}),null==j?void 0:j.map(e=>(0,a.jsx)("option",{value:e._id,children:null==e?void 0:e.brandName},e._id))]})]}),(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicBrand",children:[(0,a.jsx)(h.A.Label,{children:"Product Description"}),(0,a.jsx)(h.A.Control,{as:"textarea",name:"description",value:e.description,onChange:S,rows:4})]}),(0,a.jsxs)(h.A.Group,{className:"mb-4",controlId:"formBasicSupplierLicence",children:[(0,a.jsx)(h.A.Label,{children:"Product Photo"}),(0,a.jsx)(h.A.Control,{type:"file",onChange:e=>{y(e.target.files[0])},required:!0,accept:".png, .jpg, .jpeg, .webp",className:"form-control"}),(0,a.jsx)(h.A.Text,{className:"text-muted",children:"Upload a clear image of your product"})]}),(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicProductName",children:[(0,a.jsx)(h.A.Label,{children:"Product Price"}),(0,a.jsx)(h.A.Control,{type:"number",name:"price",value:e.price,onChange:S,placeholder:"your product price",required:!0})]}),(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicProductName",children:[(0,a.jsx)(h.A.Label,{children:"Product Quantity"}),(0,a.jsx)(h.A.Control,{type:"number",name:"stockQuantity",value:e.stockQuantity,onChange:S,placeholder:"your product stock quantity",required:!0})]}),(0,a.jsxs)(h.A.Group,{className:"mb-3",controlId:"formBasicCategory",children:[(0,a.jsx)(h.A.Label,{children:"Product Category"}),(0,a.jsxs)(h.A.Select,{name:"category",value:e.category,onChange:S,required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Category"}),null==g?void 0:g.map(e=>(0,a.jsx)("option",{value:e._id,children:e.catName},e._id))]})]}),(0,a.jsx)("div",{className:"d-grid gap-2",children:(0,a.jsx)(m.A,{variant:"primary",type:"submit",disabled:v,className:"py-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),(0,a.jsx)("span",{className:"ms-2",children:"submiting..."})]}):"Add Product"})})]})})})]})})}},668:(e,r,t)=>{"use strict";t.d(r,{M:()=>a});let a="http://localhost:5200"},1846:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(9300),o=t.n(a),n=t(2115),c=t(7390),s=t(5155);let i=n.forwardRef((e,r)=>{let{bsPrefix:t,className:a,as:n="div",...i}=e,l=(0,c.oU)(t,"row"),d=(0,c.gy)(),u=(0,c.Jm)(),p="".concat(l,"-cols"),h=[];return d.forEach(e=>{let r;let t=i[e];delete i[e],null!=t&&"object"==typeof t?{cols:r}=t:r=t,null!=r&&h.push("".concat(p).concat(e!==u?"-".concat(e):"","-").concat(r))}),(0,s.jsx)(n,{ref:r,...i,className:o()(a,l,...h)})});i.displayName="Row";let l=i},2809:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(9300),o=t.n(a),n=t(2115),c=t(7390),s=t(5155);let i=n.forwardRef((e,r)=>{let{bsPrefix:t,fluid:a=!1,as:n="div",className:i,...l}=e,d=(0,c.oU)(t,"container");return(0,s.jsx)(n,{ref:r,...l,className:o()(i,a?"".concat(d).concat("string"==typeof a?"-".concat(a):"-fluid"):d)})});i.displayName="Container";let l=i},4553:(e,r,t)=>{"use strict";t.d(r,{b:()=>a});let a=()=>localStorage.getItem("usertoken")},6598:(e,r,t)=>{Promise.resolve().then(t.bind(t,466))},6736:(e,r,t)=>{"use strict";t.d(r,{Fs:()=>n,Jy:()=>s,QT:()=>i,bW:()=>o,d$:()=>c,o7:()=>d,oo:()=>u,p7:()=>l});var a=t(668);async function o(){try{let e=await fetch("".concat(a.M,"/public/all_categories"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching categories:",e)}}async function n(){try{let e=await fetch("".concat(a.M,"/public/all_brands"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching brands:",e)}}async function c(){try{let e=await fetch("".concat(a.M,"/public/all_products"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching products:",e)}}async function s(e){try{let r=await fetch("".concat(a.M,"/public/products_by_category/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Server Error ");return await r.json()}catch(e){console.log("Error fetching products:",e)}}async function i(e){try{let r=await fetch("".concat(a.M,"/public/products_by_brand/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Server Error ");return await r.json()}catch(e){console.log("Error fetching products:",e)}}async function l(e){try{let r=await fetch("".concat(a.M,"/public/category/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Server Error ");return await r.json()}catch(e){console.log("Error fetching products:",e)}}async function d(e){try{let r=await fetch("".concat(a.M,"/public/brand_single/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Server Error ");return await r.json()}catch(e){console.log("Error fetching products:",e)}}async function u(e){try{let r=await fetch("".concat(a.M,"/public/product_single/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("Server Error ");return await r.json()}catch(e){console.log("Error fetching product:",e)}}}},e=>{var r=r=>e(e.s=r);e.O(0,[3464,6918,8996,8441,1684,7358],()=>r(6598)),_N_E=e.O()}]);