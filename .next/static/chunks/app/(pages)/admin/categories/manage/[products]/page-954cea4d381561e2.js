(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3996],{668:(e,a,s)=>{"use strict";s.d(a,{M:()=>r});let r="http://localhost:5200"},5695:(e,a,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(a,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(a,{useRouter:function(){return r.useRouter}})},6736:(e,a,s)=>{"use strict";s.d(a,{Fs:()=>c,Jy:()=>l,QT:()=>o,bW:()=>t,d$:()=>n,o7:()=>d,oo:()=>h,p7:()=>i});var r=s(668);async function t(){try{let e=await fetch("".concat(r.M,"/public/all_categories"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching categories:",e)}}async function c(){try{let e=await fetch("".concat(r.M,"/public/all_brands"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching brands:",e)}}async function n(){try{let e=await fetch("".concat(r.M,"/public/all_products"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Server Error ");return await e.json()}catch(e){console.log("Error fetching products:",e)}}async function l(e){try{let a=await fetch("".concat(r.M,"/public/products_by_category/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Server Error ");return await a.json()}catch(e){console.log("Error fetching products:",e)}}async function o(e){try{let a=await fetch("".concat(r.M,"/public/products_by_brand/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Server Error ");return await a.json()}catch(e){console.log("Error fetching products:",e)}}async function i(e){try{let a=await fetch("".concat(r.M,"/public/category/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Server Error ");return await a.json()}catch(e){console.log("Error fetching products:",e)}}async function d(e){try{let a=await fetch("".concat(r.M,"/public/brand_single/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Server Error ");return await a.json()}catch(e){console.log("Error fetching products:",e)}}async function h(e){try{let a=await fetch("".concat(r.M,"/public/product_single/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Server Error ");return await a.json()}catch(e){console.log("Error fetching product:",e)}}},8199:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var r=s(5155),t=s(6736),c=s(5695),n=s(2115);function l(){let{products:e}=(0,c.useParams)(),[a,s]=n.useState({}),[l,o]=n.useState([]),[i,d]=n.useState([]),[h,m]=n.useState([]),[u,p]=n.useState(""),[x,j]=n.useState(""),[f,g]=n.useState("name"),[b,N]=n.useState(1),[y,v]=n.useState({min:0,max:1e4}),[w,E]=n.useState(!1);n.useEffect(()=>{(async()=>{try{let a=await (0,t.Jy)(e),r=await (0,t.p7)(e),c=await (0,t.Fs)();a&&a.PsByCat&&(o(a.PsByCat),m(a.PsByCat),s(r.category),d(c.brands))}catch(e){console.log("Error fetching products",e)}})()},[e]),n.useEffect(()=>{let e=[...l];u&&(e=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase()))),x&&(e=e.filter(e=>e.brand===x)),e=e.filter(e=>e.price>=y.min&&e.price<=y.max),w&&(e=e.filter(e=>e.inStock)),e.sort((e,a)=>{switch(f){case"price-asc":return e.price-a.price;case"price-desc":return a.price-e.price;case"newest":return new Date(a.createdAt)-new Date(e.createdAt);default:return e.name.localeCompare(a.name)}}),m(e),N(1)},[u,x,f,y,w,l]);let k=6*b,S=h.slice(k-6,k),C=Math.ceil(h.length/6),T=e=>N(e),_=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"MWK"}).format(e/100),M=(e,a)=>{let s=parseInt(e.target.value)||0;v(e=>({...e,[a]:s}))};return(0,r.jsxs)("div",{className:"container py-5",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h1",{className:"display-5 fw-bold",children:a.catName||"Products"}),(0,r.jsxs)("p",{className:"text-muted",children:[h.length," products found"]}),(0,r.jsx)("hr",{className:"my-4"})]}),(0,r.jsx)("div",{className:"card shadow-sm mb-5",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsxs)("div",{className:"row g-3",children:[(0,r.jsxs)("div",{className:"col-md-6 col-lg-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Search"}),(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("span",{className:"input-group-text",children:(0,r.jsx)("i",{className:"bi bi-search"})}),(0,r.jsx)("input",{type:"text",className:"form-control",value:u,onChange:e=>p(e.target.value),placeholder:"Search products..."})]})]}),(0,r.jsxs)("div",{className:"col-md-6 col-lg-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Brand"}),(0,r.jsxs)("select",{className:"form-select",value:x,onChange:e=>j(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"All Brands"}),i.map(e=>(0,r.jsx)("option",{value:e._id,children:e.brandName},e._id))]})]}),(0,r.jsxs)("div",{className:"col-md-6 col-lg-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Sort By"}),(0,r.jsxs)("select",{className:"form-select",value:f,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"name",children:"Name"}),(0,r.jsx)("option",{value:"price-asc",children:"Price: Low to High"}),(0,r.jsx)("option",{value:"price-desc",children:"Price: High to Low"}),(0,r.jsx)("option",{value:"newest",children:"Newest First"})]})]}),(0,r.jsxs)("div",{className:"col-md-6 col-lg-3",children:[(0,r.jsx)("label",{className:"form-label d-block",children:"Availability"}),(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",id:"inStockOnly",checked:w,onChange:e=>E(e.target.checked)}),(0,r.jsx)("label",{className:"form-check-label",htmlFor:"inStockOnly",children:"In Stock Only"})]})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{className:"form-label",children:["Price Range: ",_(y.min)," - ",_(y.max)]}),(0,r.jsxs)("div",{className:"row g-2",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("span",{className:"input-group-text",children:"Min "}),(0,r.jsx)("input",{type:"number",className:"form-control",min:"0",max:y.max,value:y.min,onChange:e=>M(e,"min")})]})}),(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("span",{className:"input-group-text",children:"Max "}),(0,r.jsx)("input",{type:"number",className:"form-control",min:y.min,value:y.max,onChange:e=>M(e,"max")})]})})]})]})]})}),S.length>0?(0,r.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4",children:S.map(e=>(0,r.jsx)("div",{className:"col",children:(0,r.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,r.jsx)("div",{style:{height:"200px",overflow:"hidden"},children:(0,r.jsx)("img",{src:e.photo||"/placeholder.jpg",alt:e.name,className:"card-img-top img-fluid h-100 w-100 object-fit-cover",style:{objectPosition:"center"}})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:e.name}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,r.jsx)("span",{className:"fs-5 fw-bold",children:_(e.price)}),(0,r.jsx)("span",{className:"badge ".concat(e.inStock?"bg-success":"bg-danger"),children:e.inStock?"In Stock":"Out of Stock"})]}),(0,r.jsx)("p",{className:"card-text text-muted small",style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.description})]}),(0,r.jsx)("div",{className:"card-footer bg-transparent border-top-0",children:(0,r.jsx)("button",{className:"btn btn-primary w-100",children:"View Details"})})]})},e._id))}):(0,r.jsx)("div",{className:"text-center py-5",children:(0,r.jsxs)("div",{className:"alert alert-info",children:[(0,r.jsx)("h4",{children:"No products found"}),(0,r.jsx)("p",{className:"mb-0",children:"Try adjusting your filters or search term"})]})}),C>1&&(0,r.jsx)("nav",{className:"mt-5",children:(0,r.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,r.jsx)("li",{className:"page-item ".concat(1===b?"disabled":""),children:(0,r.jsx)("button",{className:"page-link",onClick:()=>N(e=>Math.max(e-1,1)),"aria-label":"Previous",children:(0,r.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),[...Array(C)].map((e,a)=>(0,r.jsx)("li",{className:"page-item ".concat(b===a+1?"active":""),children:(0,r.jsx)("button",{className:"page-link",onClick:()=>T(a+1),children:a+1})},a)),(0,r.jsx)("li",{className:"page-item ".concat(b===C?"disabled":""),children:(0,r.jsx)("button",{className:"page-link",onClick:()=>N(e=>Math.min(e+1,C)),"aria-label":"Next",children:(0,r.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})]})}s(6874)},9244:(e,a,s)=>{Promise.resolve().then(s.bind(s,8199))}},e=>{var a=a=>e(e.s=a);e.O(0,[6874,8441,1684,7358],()=>a(9244)),_N_E=e.O()}]);